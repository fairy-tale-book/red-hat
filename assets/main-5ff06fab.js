import{_ as i}from"./back-888361ac.js";import{n as o}from"./index-370cc7a6.js";const l=""+new URL("../images/atm.png",import.meta.url).href,c=""+new URL("../images/elsa.png",import.meta.url).href,d=""+new URL("../images/gen-story.png",import.meta.url).href;const g={data(){return{brands:[{iconName:"ele1",img:"ele1",name:"毛毛虫"},{iconName:"ele2",img:"ele2",name:"孔雀"},{iconName:"ele3",img:"ele3",name:"小鸡"},{iconName:"ele4",img:"ele4",name:"小狗"},{iconName:"ele4",img:"ele4-3",name:"长颈鹿"},{iconName:"ele3",img:"ele3-2",name:"蝴蝶"},{iconName:"ele1",img:"ele1-1",name:"小鸟"},{iconName:"ele2",img:"ele2-1",name:"小猪"}],randomDraggableBrands:[],totalDraggableItems:9,totalMatchingPairs:4,correct:0,total:0,keywords:[]}},mounted(){this.initiateGame();const t=document.getElementById("myModal"),e=document.getElementById("myBtn"),a=document.getElementsByClassName("close")[0];e.onclick=function(){t.style.display="block"},a.onclick=function(){t.style.display="none"},window.onclick=function(s){s.target===t&&(t.style.display="none")}},methods:{goResult(t){this.$router.push({path:`/gen/${this.$route.params.theme}`,query:{keywords:this.keywords,storyTeller:t}})},initiateGame(){this.randomDraggableBrands=this.generateRandomItemsArray(this.totalDraggableItems,this.brands);const t=document.querySelectorAll(".draggable"),e=document.querySelectorAll(".droppable");t.forEach(a=>{a.addEventListener("dragstart",this.dragStart)}),e.forEach(a=>{a.addEventListener("dragenter",this.dragEnter),a.addEventListener("dragover",this.dragOver),a.addEventListener("dragleave",this.dragLeave),a.addEventListener("drop",this.drop)})},dragStart(t){t.dataTransfer.setData("text",t.target.id)},dragEnter(t){t.target.classList&&t.target.classList.contains("droppable")&&!t.target.classList.contains("dropped")&&t.target.classList.add("droppable-hover")},dragOver(t){t.target.classList&&t.target.classList.contains("droppable")&&!t.target.classList.contains("dropped")&&t.preventDefault()},dragLeave(t){t.target.classList&&t.target.classList.contains("droppable")&&!t.target.classList.contains("dropped")&&t.target.classList.remove("droppable-hover")},drop(t){t.preventDefault(),t.target.classList.remove("droppable-hover");const e=t.dataTransfer.getData("text"),a=t.target.getAttribute("data-brand"),s=this.brands.filter(r=>r.img===e);console.log(s,e,111);const n=s[0].iconName===a;if(this.total++,n){const r=document.getElementById(e);t.target.classList.add("dropped"),t.target.classList.add("data-img"),r.classList.add("dragged"),r.setAttribute("draggable","false"),t.target.innerHTML=`
          <img src="./images/${s[0].img}.png" />
        `,this.correct++,this.keywords.push(s[0].name),console.log("success!!!~~~~~~~~~",this.keywords,this.correct,this.total)}},generateRandomItemsArray(t,e){const a=[],s=[...e];t>s.length&&(t=s.length);for(let n=1;n<=t;n++){const r=Math.floor(Math.random()*s.length);a.push(s[r]),s.splice(r,1)}return a}}};var m=function(){var e=this,a=e._self._c;return a("main",{key:"2"},[e._m(0),a("section",{staticClass:"draggable-items"},e._l(e.brands,function(s){return a("div",{key:s.img},[a("img",{staticClass:"draggable",attrs:{id:s.img,draggable:"","data-img":s.img,src:`images/${s.img}.png`}})])}),0),a("div",{staticClass:"matching-pairs-container"},[a("section",{staticClass:"matching-pairs"},e._l(e.totalMatchingPairs,function(s){return a("div",{key:s,class:`matching-pair pair-${s} droppable`,attrs:{"data-brand":e.brands[s-1].iconName}})}),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.correct===4,expression:"correct === 4"}],staticClass:"gen-story"},[e._m(1)]),a("div",{staticClass:"modal",attrs:{id:"myModal"}},[a("div",{staticClass:"modal-content"},[a("span",{staticClass:"close"},[e._v("×")]),a("h1",[e._v("选你喜欢的角色")]),a("div",{staticClass:"favorite-role"},[a("div",{staticClass:"role",on:{click:function(s){return e.goResult("奥特曼")}}},[a("img",{attrs:{src:l,alt:""}})]),a("div",{staticClass:"role",on:{click:function(s){return e.goResult("艾莎")}}},[a("img",{attrs:{src:c,alt:""}})])])])])])},p=[function(){var t=this,e=t._self._c;return e("header",{staticClass:"back-btn"},[e("a",{attrs:{href:"/"}},[e("img",{attrs:{src:i,alt:""}})])])},function(){var t=this,e=t._self._c;return e("a",{attrs:{id:"myBtn"}},[e("img",{attrs:{src:d,alt:""}})])}],_=o(g,m,p,!1,null,"b151b747",null,null);const f=_.exports;export{f as default};
