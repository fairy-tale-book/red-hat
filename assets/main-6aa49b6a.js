import{_ as i}from"./back-888361ac.js";import{n as o}from"./index-dab4b018.js";const l=""+new URL("../images/atm.png",import.meta.url).href,c=""+new URL("../images/elsa.png",import.meta.url).href,d=""+new URL("../images/gen-story.png",import.meta.url).href;const g={data(){return{brands:[{iconName:"ele1",img:"ele1",name:"毛毛虫"},{iconName:"ele2",img:"ele2",name:"孔雀"},{iconName:"ele3",img:"ele3",name:"小鸡"},{iconName:"ele4",img:"ele4",name:"小狗"},{iconName:"ele1",img:"ele1-1",name:"小鸟"},{iconName:"ele4",img:"ele4-3",name:"长颈鹿"},{iconName:"ele3",img:"ele3-2",name:"蝴蝶"},{iconName:"ele2",img:"ele2-1",name:"小猪"}],randomDraggableBrands:[],totalDraggableItems:9,totalMatchingPairs:4,correct:0,total:0,keywords:[]}},mounted(){this.initiateGame();const t=document.getElementById("myModal"),a=document.getElementById("myBtn"),e=document.getElementsByClassName("close")[0];a.onclick=function(){t.style.display="block"},e.onclick=function(){t.style.display="none"},window.onclick=function(s){s.target===t&&(t.style.display="none")}},methods:{goResult(t){this.$router.push({path:`/gen/${this.$route.params.theme}`,query:{keywords:this.keywords,storyTeller:t}})},initiateGame(){this.randomDraggableBrands=this.generateRandomItemsArray(this.totalDraggableItems,this.brands);const t=document.querySelectorAll(".draggable"),a=document.querySelectorAll(".droppable");t.forEach(e=>{e.addEventListener("dragstart",this.dragStart)}),a.forEach(e=>{e.addEventListener("dragenter",this.dragEnter),e.addEventListener("dragover",this.dragOver),e.addEventListener("dragleave",this.dragLeave),e.addEventListener("drop",this.drop)})},dragStart(t){t.dataTransfer.setData("text",t.target.id)},dragEnter(t){t.target.classList&&t.target.classList.contains("droppable")&&!t.target.classList.contains("dropped")&&t.target.classList.add("droppable-hover")},dragOver(t){t.target.classList&&t.target.classList.contains("droppable")&&!t.target.classList.contains("dropped")&&t.preventDefault()},dragLeave(t){t.target.classList&&t.target.classList.contains("droppable")&&!t.target.classList.contains("dropped")&&t.target.classList.remove("droppable-hover")},drop(t){t.preventDefault(),t.target.classList.remove("droppable-hover");const a=t.dataTransfer.getData("text"),e=t.target.getAttribute("data-brand"),s=this.brands.filter(r=>r.img===a);console.log(s,a,111);const n=s[0].iconName===e;if(this.total++,n){const r=document.getElementById(a);t.target.classList.add("dropped"),t.target.classList.add("data-img"),r.classList.add("dragged"),r.setAttribute("draggable","false"),t.target.innerHTML=`
          <img src="./images/${s[0].img}.png" />
        `,this.correct++,this.keywords.push(s[0].name),console.log("success!!!~~~~~~~~~",this.keywords,this.correct,this.total)}},generateRandomItemsArray(t,a){const e=[],s=[...a];t>s.length&&(t=s.length);for(let n=1;n<=t;n++){const r=Math.floor(Math.random()*s.length);e.push(s[r]),s.splice(r,1)}return e}}};var m=function(){var a=this,e=a._self._c;return e("main",{key:"2"},[a._m(0),e("section",{staticClass:"draggable-items"},a._l(a.brands,function(s){return e("div",{key:s.img},[e("img",{staticClass:"draggable",attrs:{id:s.img,draggable:"","data-img":s.img,src:`images/${s.img}.png`}})])}),0),e("div",{staticClass:"matching-pairs-container"},[e("section",{staticClass:"matching-pairs"},a._l(a.totalMatchingPairs,function(s){return e("div",{key:s,class:`matching-pair pair-${s} droppable`,attrs:{"data-brand":a.brands[s-1].iconName}},[a._v(" "+a._s(a.brands[s-1].iconName)+" ")])}),0)]),e("div",{directives:[{name:"show",rawName:"v-show",value:a.correct===4,expression:"correct === 4"}],staticClass:"gen-story"},[a._m(1)]),e("div",{staticClass:"modal",attrs:{id:"myModal"}},[e("div",{staticClass:"modal-content"},[e("span",{staticClass:"close"},[a._v("×")]),e("h1",[a._v("选你喜欢的角色")]),e("div",{staticClass:"favorite-role"},[e("div",{staticClass:"role",on:{click:function(s){return a.goResult("奥特曼")}}},[e("img",{attrs:{src:l,alt:""}})]),e("div",{staticClass:"role",on:{click:function(s){return a.goResult("艾莎")}}},[e("img",{attrs:{src:c,alt:""}})])])])])])},_=[function(){var t=this,a=t._self._c;return a("header",{staticClass:"back-btn"},[a("a",{attrs:{href:"/"}},[a("img",{attrs:{src:i,alt:""}})])])},function(){var t=this,a=t._self._c;return a("a",{attrs:{id:"myBtn"}},[a("img",{attrs:{src:d,alt:""}})])}],p=o(g,m,_,!1,null,"06a37324",null,null);const f=p.exports;export{f as default};
